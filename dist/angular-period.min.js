!function(){function e(e){var n=e[0],r=[n],t=e[e.length-1];do{if(n=n.nextSibling,!n)break;r.push(n)}while(n!==t);return angular.element(r)}function n(e,n){var r=n-e;return r>s?s:r}function r(e){var n=new Date(e);if(n.toString()===g)throw new Error("InvalidDate! ng-period can't parse \""+e+'"');return console.debug("parse to",n,e),n}function t(e,n){var r,t=(new Date).getTime();switch(!1){case!(e>t&&n>t):r=o;break;case!(t>=e&&n>=t):r=c;break;case!(t>n&&t>e):r=u}return console.debug("[ngPeriod] check state",r,e,n,t),r}function a(a,i){return{restrict:"A",controller:["$scope",function(e){this.cases={}}],link:function(u,s,g,l){function d(){var e=u.$eval(g.ngPeriodStart),n=u.$eval(g.ngPeriodEnd);if(e&&n){var t=r(e).getTime(),a=r(n).getTime();f(t,a)}}function h(e){return function(){m.splice(e,1)}}function f(r,u){for(var s=0;s<v.length;s++)i.cancel(v[s]);var g=t(r,u);console.debug('[ngPeriod] current state is "%s"',g);var d=(new Date).getTime();g===o&&(console.debug('[ngPeriod] set timer for stage change to "during"',n(d,r)),v.push(i(f,n(d,r),!0,r,u))),g===c&&(console.debug('[ngPeriod] set timer for stage change to "after"',n(d,u)),v.push(i(f,n(d,u),!0,r,u)));for(var s=0;s<m.length;s++)a.cancel(m[s]);for(var s=0;s<P.length;s++){var b=e(p[s].clone);P[s].$destroy();var w=m[s]=a.leave(b);w.then(h(s))}P.length=0,p.length=0;var $=l.cases["!"+g];$&&$.forEach(function(e){e.transclude(function(n,r){P.push(r);var t=e.element;n[n.length++]=document.createComment(" end ngPeriodWhen: ");var i={clone:n};p.push(i),a.enter(n,t.parent(),t)})})}var v=[],m=[],P=[],p=[];u.$watch(g.ngPeriodStart,d),u.$watch(g.ngPeriodEnd,d)}}}function i(){return{transclude:"element",require:"^ngPeriod",restrict:"A",multiElement:!0,link:function(e,n,r,t,a){t.cases["!"+r.ngPeriodWhen]=t.cases["!"+r.ngPeriodWhen]||[],t.cases["!"+r.ngPeriodWhen].push({transclude:a,element:n})}}}var o="previous",c="during",u="after",s=2147483647,g="Invalid Date";a.$inject=["$animate","$timeout"],angular.module("angularPeriod",[]).directive("ngPeriod",a).directive("ngPeriodWhen",i)}();